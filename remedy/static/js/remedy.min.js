!function(e,n){"use strict";e.Remedy=e.Remedy||{},e.Remedy.hideControlGroup=function(e){n(function(){n("#"+e).parentsUntil("div.control-group").parent().hide()})},e.Remedy.makeSelect2=function(e){n(function(){var t=n("#"+e),o=t.val();t.select2({width:"inherit"}).val(o)})};var t=function(e,n,t){t?(e.val(t.latitude.toFixed(5)),n.val(t.longitude.toFixed(5))):(e.val(""),n.val(""))},o=function(e,n){e.prop("disabled",n),e.children(".glyphicon").toggleClass("glyphicon-screenshot glyphicon-hourglass")};e.Remedy.geoLocationButton=function(a,r,i,l){n(function(){var d=n("#"+a),s=n("#"+r),c=n("#"+i),g=n("#"+l);d.length&&s.length&&c.length&&g.length&&("geolocation"in navigator==!1&&(d.prop("disabled",!0),d.attr("title","Your browser does not support geolocation.")),d.prop("disabled",!1),d.on("click.remedy.geolocation",function(){o(d,!0),navigator.geolocation.getCurrentPosition(function(e){o(d,!1),s.val("My Current Location"),t(c,g,e.coords)},function(n){o(d,!1),1!==n.code&&e.alert("Sorry, we couldn't determine your position.")},{enableHighAccuracy:!1,timeout:2e4,maximumAge:0})}))})};var a=function(e){var n=Math.max(320,Math.min(e.parent().width(),800));e.width(n),e.height(n)};e.Remedy.showProviderMap=function(e,t){return t.length?(n(function(){var o=n("#"+e);a(o);var r,i,l,d=new google.maps.Map(document.getElementById(e)),s=new google.maps.LatLngBounds;for(l=0;l<t.length;l+=1){var c=t[l];r=new google.maps.Marker({map:d,title:c.name,position:new google.maps.LatLng(c.latitude,c.longitude)});var g=n("<div />");n("<a href='"+c.url+"' target='_blank'><strong>"+c.name+"</strong></a><br />").appendTo(g),n("<addr><small>"+c.address+"</small></addr><br />").appendTo(g),n("<span />").html(c.desc).appendTo(g),i=new google.maps.InfoWindow({content:g.html(),maxWidth:320}),google.maps.event.addListener(r,"click",function(e,n){return function(){n.open(d,e)}}(r,i)),s.extend(r.position)}d.fitBounds(s),google.maps.event.addDomListener(window,"resize",function(){a(o);var e=d.getCenter();google.maps.event.trigger(d,"resize"),d.setCenter(e)})}),!0):(n(function(){n("#"+e).parent().hide()}),!1)};var r=function(e){if(!e||!e.length)return"";for(var t=0;t<e.length;t+=1){var o=e[t];if(n.inArray(o,["locality","administrative_area_level_2","administrative_area_level_1"])>=0)return o}return""},i=function(e){var t="",o="",a="";if(!e||!e.address_components||!e.address_components.length)return"";for(var i=0;i<e.address_components.length;i+=1){var l=e.address_components[i],d="",s="";if(d=n.trim(l.short_name)||n.trim(l.long_name),!d)return"";switch(s=r(l.types)){case"locality":d=n.trim(l.long_name)||d,t=t||d;break;case"administrative_area_level_2":o=o||d;break;case"administrative_area_level_1":a=a||d}}var c=t||o||"";return a&&(c&&(c+=", "),c+=a),c};e.Remedy.initMapsAutocomplete=function(e,o,a,r,l){var d=n("#"+a),s=n("#"+r),c=n(),g=[];l&&(c=n("#"+l)),g=e?["address"]:["(regions)"],n(function(){var e=new google.maps.places.Autocomplete(document.getElementById(o),{types:g});google.maps.event.addListener(e,"place_changed",function(){var n=e.getPlace();n&&n.geometry&&n.geometry.location?(t(d,s,{latitude:n.geometry.location.lat(),longitude:n.geometry.location.lng()}),c.length>0&&c.val(i(n))):(t(d,s,null),c.val(""))}),n("#"+o).change(function(){n.trim(n(this).val())||(t(d,s,null),c.val(""))})})}}(window,jQuery);