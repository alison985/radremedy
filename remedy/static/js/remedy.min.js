!function(e,t){"use strict";e.Remedy=e.Remedy||{},e.Remedy.hideControlGroup=function(e){t(function(){t("#"+e).parentsUntil("div.control-group").parent().hide()})},e.Remedy.makeBootstrapMultiselect=function(e){t(function(){var n=t("#"+e),o="option",a="options";n.data("noun")&&(o=n.data("noun")),n.data("nounplural")&&(a=n.data("nounplural")),n.multiselect({buttonWidth:"100%",enableClickableOptGroups:!0,includeSelectAllOption:!1,enableFiltering:!0,enableCaseInsensitiveFiltering:!0,buttonText:function(e,n){if(0===e.length)return t(n).prop("multiple")?"No "+a+" selected":"No "+o+" selected";if(e.length>3)return e.length.toString()+" "+a+" selected";var i=[];return e.each(function(){t(this).attr("label")?i.push(t(this).attr("label")):i.push(t(this).html())}),i.join(", ")+""}})})};var n=function(e,t,n){n?(e.val(n.latitude.toFixed(5)),t.val(n.longitude.toFixed(5))):(e.val(""),t.val(""))},o=function(e,t){e.prop("disabled",t),e.children(".glyphicon").toggleClass("glyphicon-screenshot glyphicon-hourglass")};e.Remedy.geoLocationButton=function(a,i,r,l){t(function(){var s=t("#"+a),d=t("#"+i),c=t("#"+r),u=t("#"+l);s.length&&d.length&&c.length&&u.length&&("geolocation"in navigator==!1&&(s.prop("disabled",!0),s.attr("title","Your browser does not support geolocation.")),s.prop("disabled",!1),s.on("click.remedy.geolocation",function(){o(s,!0),navigator.geolocation.getCurrentPosition(function(e){o(s,!1),d.val("My Current Location"),n(c,u,e.coords)},function(t){o(s,!1),1!==t.code&&e.alert("Sorry, we couldn't determine your position.")},{enableHighAccuracy:!1,timeout:2e4,maximumAge:0})}))})};var a=function(e){var t=Math.max(320,Math.min(e.parent().width(),800));e.width(t),e.height(t)};e.Remedy.showProviderMap=function(e,n){return n.length?(t(function(){var o=t("#"+e);a(o);var i,r,l,s=new google.maps.Map(document.getElementById(e)),d=new google.maps.LatLngBounds;for(l=0;l<n.length;l+=1){var c=n[l];i=new google.maps.Marker({map:s,title:c.name,position:new google.maps.LatLng(c.latitude,c.longitude)});var u=t("<div />");t("<a href='"+c.url+"' target='_blank'><strong>"+c.name+"</strong></a><br />").appendTo(u),t("<addr><small>"+c.address+"</small></addr><br />").appendTo(u),t("<span />").html(c.desc).appendTo(u),r=new google.maps.InfoWindow({content:u.html(),maxWidth:320}),google.maps.event.addListener(i,"click",function(e,t){return function(){t.open(s,e)}}(i,r)),d.extend(i.position)}s.fitBounds(d),google.maps.event.addDomListener(window,"resize",function(){a(o);var e=s.getCenter();google.maps.event.trigger(s,"resize"),s.setCenter(e)})}),!0):(t(function(){t("#"+e).parent().hide()}),!1)};var i=function(e){if(!e||!e.length)return"";for(var n=0;n<e.length;n+=1){var o=e[n];if(t.inArray(o,["locality","administrative_area_level_2","administrative_area_level_1"])>=0)return o}return""},r=function(e){var n="",o="",a="";if(!e||!e.address_components||!e.address_components.length)return"";for(var r=0;r<e.address_components.length;r+=1){var l=e.address_components[r],s="",d="";if(s=t.trim(l.short_name)||t.trim(l.long_name),!s)return"";switch(d=i(l.types)){case"locality":s=t.trim(l.long_name)||s,n=n||s;break;case"administrative_area_level_2":o=o||s;break;case"administrative_area_level_1":a=a||s}}var c=n||o||"";return a&&(c&&(c+=", "),c+=a),c};e.Remedy.initMapsAutocomplete=function(e,o,a,i,l){var s=t("#"+a),d=t("#"+i),c=t(),u=[];l&&(c=t("#"+l)),u=e?["address"]:["(cities)"],t(function(){var e=new google.maps.places.Autocomplete(document.getElementById(o),{types:u});google.maps.event.addListener(e,"place_changed",function(){var t=e.getPlace();t&&t.geometry&&t.geometry.location?(n(s,d,{latitude:t.geometry.location.lat(),longitude:t.geometry.location.lng()}),c.length>0&&c.val(r(t))):(n(s,d,null),c.val(""))}),t("#"+o).change(function(){t.trim(t(this).val())||(n(s,d,null),c.val(""))})})}}(window,jQuery);