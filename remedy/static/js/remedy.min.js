!function(e,t){"use strict";e.Remedy=e.Remedy||{},e.Remedy.hideControlGroup=function(e){t(function(){t("#"+e).parentsUntil("div.control-group").parent().hide()})},e.Remedy.makeBootstrapMultiselect=function(e){t(function(){var n=t("#"+e),o="option",a="options";n.data("noun")&&(o=n.data("noun")),n.data("nounplural")&&(a=n.data("nounplural")),n.multiselect({buttonWidth:"100%",maxHeight:300,enableClickableOptGroups:!0,includeSelectAllOption:!1,enableFiltering:!0,enableCaseInsensitiveFiltering:!0,filterPlaceholder:"Search "+a,templates:{filter:'<li class="multiselect-item filter"><div class="input-group"><input class="form-control multiselect-search" type="text"></div></li>',filterClearBtn:'<span class="input-group-btn"><button class="btn btn-default multiselect-clear-filter" type="button" title="Clear filter"><i class="glyphicon glyphicon-remove-circle" aria-hidden="true"></i><span class="sr-only">Clear filter</span></button></span>'},buttonText:function(e,n){if(0===e.length)return t(n).prop("multiple")?"No "+a+" selected":"No "+o+" selected";if(e.length>3)return e.length.toString()+" "+a+" selected";var i=[];return e.each(function(){t(this).attr("label")?i.push(t(this).attr("label")):i.push(t(this).html())}),i.join(", ")+""}})})};var n=function(e,t,n){n?(e.val(n.latitude.toFixed(5)),t.val(n.longitude.toFixed(5))):(e.val(""),t.val(""))},o=function(e,t){e.prop("disabled",t),e.children(".glyphicon").toggleClass("glyphicon-screenshot glyphicon-hourglass")};e.Remedy.geoLocationButton=function(a,i,l,r){t(function(){var s=t("#"+a),c=t("#"+i),u=t("#"+l),d=t("#"+r);s.length&&c.length&&u.length&&d.length&&("geolocation"in navigator==!1&&(s.prop("disabled",!0),s.attr("title","Your browser does not support geolocation.")),s.prop("disabled",!1),s.on("click.remedy.geolocation",function(){o(s,!0),navigator.geolocation.getCurrentPosition(function(e){o(s,!1),c.val("My Current Location"),n(u,d,e.coords)},function(t){o(s,!1),1!==t.code&&e.alert("Sorry, we couldn't determine your position.")},{enableHighAccuracy:!1,timeout:2e4,maximumAge:0})}))})};var a=function(e){var t=Math.max(320,Math.min(e.parent().width(),800));e.width(t),e.height(t)};e.Remedy.showProviderMap=function(e,n){return n.length?(t(function(){var o=t("#"+e);a(o);var i,l,r,s=new google.maps.Map(document.getElementById(e)),c=new google.maps.LatLngBounds;for(r=0;r<n.length;r+=1){var u=n[r];i=new google.maps.Marker({map:s,title:u.name,position:new google.maps.LatLng(u.latitude,u.longitude)});var d=t("<div />");t("<a href='"+u.url+"' target='_blank'><strong>"+u.name+"</strong></a><br />").appendTo(d),t("<addr><small>"+u.address+"</small></addr><br />").appendTo(d),t("<span />").html(u.desc).appendTo(d),l=new google.maps.InfoWindow({content:d.html(),maxWidth:320}),google.maps.event.addListener(i,"click",function(e,t){return function(){t.open(s,e)}}(i,l)),c.extend(i.position)}s.fitBounds(c),google.maps.event.addDomListener(window,"resize",function(){a(o);var e=s.getCenter();google.maps.event.trigger(s,"resize"),s.setCenter(e)})}),!0):(t(function(){t("#"+e).parent().hide()}),!1)};var i=function(e){if(!e||!e.length)return"";for(var n=0;n<e.length;n+=1){var o=e[n];if(t.inArray(o,["locality","administrative_area_level_2","administrative_area_level_1"])>=0)return o}return""},l=function(e){var n="",o="",a="";if(!e||!e.address_components||!e.address_components.length)return"";for(var l=0;l<e.address_components.length;l+=1){var r=e.address_components[l],s="",c="";if(s=t.trim(r.short_name)||t.trim(r.long_name),!s)return"";switch(c=i(r.types)){case"locality":s=t.trim(r.long_name)||s,n=n||s;break;case"administrative_area_level_2":o=o||s;break;case"administrative_area_level_1":a=a||s}}var u=n||o||"";return a&&(u&&(u+=", "),u+=a),u};e.Remedy.initMapsAutocomplete=function(e,o,a,i,r){var s=t("#"+a),c=t("#"+i),u=t(),d=[];r&&(u=t("#"+r)),d=e?["address"]:["(cities)"],t(function(){var e=new google.maps.places.Autocomplete(document.getElementById(o),{types:d});google.maps.event.addListener(e,"place_changed",function(){var t=e.getPlace();t&&t.geometry&&t.geometry.location?(n(s,c,{latitude:t.geometry.location.lat(),longitude:t.geometry.location.lng()}),u.length>0&&u.val(l(t))):(n(s,c,null),u.val(""))}),t("#"+o).change(function(){t.trim(t(this).val())||(n(s,c,null),u.val(""))})})}}(window,jQuery);