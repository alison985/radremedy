!function(e,t){"use strict";e.Remedy=e.Remedy||{},e.Remedy.hideControlGroup=function(e){t(function(){t("#"+e).parentsUntil("div.control-group").parent().hide()})},e.Remedy.makeSelect2=function(e){t(function(){var n=t("#"+e),o=n.val();n.select2({width:"inherit"}).val(o)})},e.Remedy.makeBootstrapMultiselect=function(e){t(function(){var n=t("#"+e);n.multiselect({buttonWidth:"100%",enableClickableOptGroups:!0,includeSelectAllOption:!1,enableFiltering:!0,enableCaseInsensitiveFiltering:!0})})};var n=function(e,t,n){n?(e.val(n.latitude.toFixed(5)),t.val(n.longitude.toFixed(5))):(e.val(""),t.val(""))},o=function(e,t){e.prop("disabled",t),e.children(".glyphicon").toggleClass("glyphicon-screenshot glyphicon-hourglass")};e.Remedy.geoLocationButton=function(a,i,r,l){t(function(){var s=t("#"+a),c=t("#"+i),d=t("#"+r),g=t("#"+l);s.length&&c.length&&d.length&&g.length&&("geolocation"in navigator==!1&&(s.prop("disabled",!0),s.attr("title","Your browser does not support geolocation.")),s.prop("disabled",!1),s.on("click.remedy.geolocation",function(){o(s,!0),navigator.geolocation.getCurrentPosition(function(e){o(s,!1),c.val("My Current Location"),n(d,g,e.coords)},function(t){o(s,!1),1!==t.code&&e.alert("Sorry, we couldn't determine your position.")},{enableHighAccuracy:!1,timeout:2e4,maximumAge:0})}))})};var a=function(e){var t=Math.max(320,Math.min(e.parent().width(),800));e.width(t),e.height(t)};e.Remedy.showProviderMap=function(e,n){return n.length?(t(function(){var o=t("#"+e);a(o);var i,r,l,s=new google.maps.Map(document.getElementById(e)),c=new google.maps.LatLngBounds;for(l=0;l<n.length;l+=1){var d=n[l];i=new google.maps.Marker({map:s,title:d.name,position:new google.maps.LatLng(d.latitude,d.longitude)});var g=t("<div />");t("<a href='"+d.url+"' target='_blank'><strong>"+d.name+"</strong></a><br />").appendTo(g),t("<addr><small>"+d.address+"</small></addr><br />").appendTo(g),t("<span />").html(d.desc).appendTo(g),r=new google.maps.InfoWindow({content:g.html(),maxWidth:320}),google.maps.event.addListener(i,"click",function(e,t){return function(){t.open(s,e)}}(i,r)),c.extend(i.position)}s.fitBounds(c),google.maps.event.addDomListener(window,"resize",function(){a(o);var e=s.getCenter();google.maps.event.trigger(s,"resize"),s.setCenter(e)})}),!0):(t(function(){t("#"+e).parent().hide()}),!1)};var i=function(e){if(!e||!e.length)return"";for(var n=0;n<e.length;n+=1){var o=e[n];if(t.inArray(o,["locality","administrative_area_level_2","administrative_area_level_1"])>=0)return o}return""},r=function(e){var n="",o="",a="";if(!e||!e.address_components||!e.address_components.length)return"";for(var r=0;r<e.address_components.length;r+=1){var l=e.address_components[r],s="",c="";if(s=t.trim(l.short_name)||t.trim(l.long_name),!s)return"";switch(c=i(l.types)){case"locality":s=t.trim(l.long_name)||s,n=n||s;break;case"administrative_area_level_2":o=o||s;break;case"administrative_area_level_1":a=a||s}}var d=n||o||"";return a&&(d&&(d+=", "),d+=a),d};e.Remedy.initMapsAutocomplete=function(e,o,a,i,l){var s=t("#"+a),c=t("#"+i),d=t(),g=[];l&&(d=t("#"+l)),g=e?["address"]:["(cities)"],t(function(){var e=new google.maps.places.Autocomplete(document.getElementById(o),{types:g});google.maps.event.addListener(e,"place_changed",function(){var t=e.getPlace();t&&t.geometry&&t.geometry.location?(n(s,c,{latitude:t.geometry.location.lat(),longitude:t.geometry.location.lng()}),d.length>0&&d.val(r(t))):(n(s,c,null),d.val(""))}),t("#"+o).change(function(){t.trim(t(this).val())||(n(s,c,null),d.val(""))})})}}(window,jQuery);