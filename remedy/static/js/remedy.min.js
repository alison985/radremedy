!function(e,t){"use strict";e.Remedy=e.Remedy||{},e.Remedy.hideControlGroup=function(e){t(function(){t("#"+e).parentsUntil("div.control-group").parent().hide()})},e.Remedy.makeSelect2=function(e){t(function(){var n=t("#"+e),o=n.val();n.select2({width:"inherit"}).val(o)})};var n=function(e,t){e.prop("disabled",t),e.children(".glyphicon").toggleClass("glyphicon-screenshot glyphicon-hourglass")};e.Remedy.geoLocationButton=function(o,a,r,i){t(function(){var l=t("#"+o),d=t("#"+a),s=t("#"+r),c=t("#"+i);l.length&&d.length&&s.length&&c.length&&("geolocation"in navigator==!1&&(l.prop("disabled",!0),l.attr("title","Your browser does not support geolocation.")),l.prop("disabled",!1),l.on("click.remedy.geolocation",function(){n(l,!0),navigator.geolocation.getCurrentPosition(function(e){n(l,!1),d.val("My Current Location"),s.val(e.coords.latitude.toFixed(5)),c.val(e.coords.longitude.toFixed(5))},function(t){n(l,!1),1!==t.code&&e.alert("Sorry, we couldn't determine your position.")},{enableHighAccuracy:!1,timeout:2e4,maximumAge:0})}))})};var o=function(e){var t=Math.max(320,Math.min(e.parent().width(),800));e.width(t),e.height(t)};e.Remedy.showProviderMap=function(e,n){return n.length?(t(function(){var a=t("#"+e);o(a);var r,i,l,d=new google.maps.Map(document.getElementById(e)),s=new google.maps.LatLngBounds;for(l=0;l<n.length;l+=1){var c=n[l];r=new google.maps.Marker({map:d,title:c.name,position:new google.maps.LatLng(c.latitude,c.longitude)});var g=t("<div />");t("<a href='"+c.url+"' target='_blank'><strong>"+c.name+"</strong></a><br />").appendTo(g),t("<addr><small>"+c.address+"</small></addr><br />").appendTo(g),t("<span />").html(c.desc).appendTo(g),i=new google.maps.InfoWindow({content:g.html(),maxWidth:320}),google.maps.event.addListener(r,"click",function(e,t){return function(){t.open(d,e)}}(r,i)),s.extend(r.position)}d.fitBounds(s),google.maps.event.addDomListener(window,"resize",function(){o(a);var e=d.getCenter();google.maps.event.trigger(d,"resize"),d.setCenter(e)})}),!0):(t(function(){t("#"+e).parent().hide()}),!1)};var a=function(e){if(!e||!e.length)return"";for(var n=0;n<e.length;n+=1){var o=e[n];if(t.inArray(o,["locality","administrative_area_level_2","administrative_area_level_1"])>=0)return o}return""},r=function(e){var n="",o="",r="";if(!e||!e.address_components||!e.address_components.length)return"";for(var i=0;i<e.address_components.length;i+=1){var l=e.address_components[i],d="",s="";if(d=t.trim(l.short_name)||t.trim(l.long_name),!d)return"";switch(s=a(l.types)){case"locality":d=t.trim(l.long_name)||d,n=n||d;break;case"administrative_area_level_2":o=o||d;break;case"administrative_area_level_1":r=r||d}}var c=n||o||"";return r&&(c&&(c+=", "),c+=r),c};e.Remedy.initMapsAutocomplete=function(e,n,o,a,i){var l=t("#"+o),d=t("#"+a),s=t(),c=[];i&&(s=t("#"+i)),c=e?["address"]:["(regions)"],t(function(){var e=new google.maps.places.Autocomplete(document.getElementById(n),{types:c});google.maps.event.addListener(e,"place_changed",function(){var t=e.getPlace();t&&t.geometry&&t.geometry.location?(l.val(t.geometry.location.lat().toFixed(5)),d.val(t.geometry.location.lng().toFixed(5)),s.length>0&&s.val(r(t))):(l.val(""),d.val(""),s.val(""))}),t("#"+n).change(function(){t.trim(t(this).val())||(l.val(""),d.val(""),s.val(""))})})}}(window,jQuery);